

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Video Description Language &mdash; Stupeflix API 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Stupeflix API 1.0 documentation" href="../index.html" />
    <link rel="up" title="Resources" href="../resources.html" />
    <link rel="next" title="Supported coders, formats" href="05_supported_coders_formats.html" />
    <link rel="prev" title="Play.js" href="03_play_js.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="05_supported_coders_formats.html" title="Supported coders, formats"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="03_play_js.html" title="Play.js"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Stupeflix API 1.0 documentation</a> &raquo;</li>
          <li><a href="../resources.html" accesskey="U">Resources</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="video-description-language">
<h1>Video Description Language<a class="headerlink" href="#video-description-language" title="Permalink to this headline">¶</a></h1>
<p>The language is based on <strong>XML</strong>, and use the <a class="reference external" href="http://code.stupeflix.com/schema.xsd">Craftsman 1.0 API schema</a>.</p>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s start with an example of a very simple but yet valid movie definition.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;movie</span> <span class="na">service=</span><span class="s">&quot;craftsman-1.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;stack&gt;</span>
      <span class="nt">&lt;effect</span> <span class="na">type=</span><span class="s">&quot;kenburns&quot;</span> <span class="na">duration=</span><span class="s">&quot;2.5&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;image</span> <span class="na">filename =</span> <span class="s">&quot;http://assets.stupeflix.com/code/images/Ha_long_bay.jpg&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/effect&gt;</span>
      <span class="nt">&lt;effect</span> <span class="na">type=</span><span class="s">&quot;panel&quot;</span> <span class="na">duration=</span><span class="s">&quot;5.0&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;image</span> <span class="na">filename =</span> <span class="s">&quot;http://assets.stupeflix.com/code/images/Canyon_de_Chelly_Navajo.jpg&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/effect&gt;</span>
      <span class="nt">&lt;audio</span> <span class="na">filename=</span><span class="s">&quot;http://dl.dropbox.com/u/1524046/Music/Catch_a_Marvel.mp3&quot;</span> <span class="na">fadeout=</span><span class="s">&quot;2&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;text</span> <span class="na">type=</span><span class="s">&quot;legend&quot;</span><span class="nt">&gt;</span>Welcome to the desert.<span class="nt">&lt;/text&gt;</span>
    <span class="nt">&lt;/stack&gt;</span>
    <span class="nt">&lt;effect</span> <span class="na">type=</span><span class="s">&quot;flower&quot;</span> <span class="na">duration=</span><span class="s">&quot;5.0&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;image</span> <span class="na">filename =</span> <span class="s">&quot;http://assets.stupeflix.com/code/images/Monument_Valley.jpg&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/effect&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/movie&gt;</span>
</pre></div>
</div>
<p>Alternatively, you can choose to pack all the assets and movie definition in a single file, as for the stupeflix-1.0 format.
This xml description produce a movie made of two parts: - first part with a stack of several elements : fullscreen foreground with a kenburns effect disappearing after 2.5 seconds, and fullscreen background with a panel effect, plus a text effect on top of it. An audio track is added, with a fadeout of &#8220;2s&#8221;. - second part, a single flower effect, with no audio Let&#8217;s see now how to build a video using this service.</p>
</div>
<div class="section" id="movie-definition-full-featured">
<h2>Movie definition, full featured<a class="headerlink" href="#movie-definition-full-featured" title="Permalink to this headline">¶</a></h2>
<p>To describe a movie, we will start by defining atoms, that creates a video stream or an audio stream, and operators to compose these elements. Operators transform one or several video/audio streams into one stream which can be further combined with other streams.</p>
<div class="section" id="atoms">
<h3>Atoms<a class="headerlink" href="#atoms" title="Permalink to this headline">¶</a></h3>
<p>Atoms are responsible for generating a single video / audio stream directly from assets. They define a stream of audio or video (or both) with a fixed duration. They will be combined on the fly by the video generator.</p>
<p>Available atoms are:</p>
<p><tt class="docutils literal"><span class="pre">effect</span></tt></p>
<blockquote>
<div>Can be used to turn one or several images or video assets (image and video tags) into a video stream (with optional audio stream).</div></blockquote>
<p><tt class="docutils literal"><span class="pre">text</span></tt></p>
<blockquote>
<div>Turn a text into a video stream, using some kind of text rendering effect.</div></blockquote>
<p><tt class="docutils literal"><span class="pre">audio</span></tt></p>
<blockquote>
<div>Turn an audio asset into an audio stream.</div></blockquote>
<p><tt class="docutils literal"><span class="pre">overlay</span></tt></p>
<blockquote>
<div>Add an overlay on top of an existing scene.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Image and video tags are not directly atoms, as the effect is responsible to handle aspect ratio adaptation if the input image or video aspect ratio is different from the generated video.</p>
</div>
</div>
<div class="section" id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h3>
<p>An operator combines several audio/video streams into a single one.</p>
<p>Available operators are:</p>
<p><tt class="docutils literal"><span class="pre">sequence</span></tt></p>
<blockquote>
<div>This operator takes a set of streams and just concatenate them in time. The related tag is sequence, or body : top level tag is a sequence.</div></blockquote>
<p><tt class="docutils literal"><span class="pre">stack</span></tt></p>
<blockquote>
<div>This operator takes a set of streams and display them together. The display order is the xml order : first in the list, first to be drawn, and so may be partially hidden by subsequent draws.</div></blockquote>
</div>
<div class="section" id="atoms-operators-combination">
<h3>Atoms / Operators combination<a class="headerlink" href="#atoms-operators-combination" title="Permalink to this headline">¶</a></h3>
<p>A stack or a sequence or effect can contain atoms, sequences, and stacks.</p>
</div>
<div class="section" id="effects">
<h3>Effects<a class="headerlink" href="#effects" title="Permalink to this headline">¶</a></h3>
<p>You will find a complete descriptions of parameters for each kind of effects in <a class="reference external" href="http://wiki.stupeflix.com/doku.php?id=effects">http://wiki.stupeflix.com/doku.php?id=effects</a>.</p>
<p>A typical effect tag looks like:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;effect</span> <span class="na">type=</span><span class="s">&quot;diving&quot;</span>  <span class="na">duration=</span><span class="s">&quot;5.0&quot;</span> <span class="nt">&gt;</span>
  <span class="nt">&lt;image</span> <span class="na">filename=</span><span class="s">&quot;http://assets.stupeflix.com/code/images/Ha_long_bay.jpg&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;image</span> <span class="na">filename=</span><span class="s">&quot;http://assets.stupeflix.com/code/images/Canyon_de_Chelly_Navajo.jpg&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;image</span> <span class="na">filename=</span><span class="s">&quot;http://assets.stupeflix.com/code/images/Monument_Valley.jpg&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/effect&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="transitions">
<h3>Transitions<a class="headerlink" href="#transitions" title="Permalink to this headline">¶</a></h3>
<p>A transition tag can only be inserted in a sequence tag (or in the body tag). It uses the previous and the next video sequences provided, overlap them (reducing the sequence total duration), and so generate a new video stream. Previous and next video sequences can be any video stream: effect or stack of complex effects.</p>
<p>You will find a complete descriptions of parameters for each kind of transition in <a class="reference external" href="http://wiki.stupeflix.com/doku.php?id=transitions">http://wiki.stupeflix.com/doku.php?id=transitions</a>.</p>
<p>A typical transition tag looks like :</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;transition</span> <span class="na">type=</span><span class="s">&quot;move&quot;</span> <span class="na">direction=</span><span class="s">&quot;down&quot;</span> <span class="na">duration=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="text">
<h3>Text<a class="headerlink" href="#text" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="9%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Presence</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>type</td>
<td>required</td>
<td>the type of text effect. The only currently available type is &#8220;legend&#8221;.</td>
</tr>
<tr class="row-odd"><td>duration</td>
<td>optional</td>
<td>the duration of the text tag (optional because it may be inferred from the enclosing stack tag).</td>
</tr>
</tbody>
</table>
<p>The text to be displayed is then contained in the text tag:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;text</span> <span class="na">type=</span><span class="s">&quot;legend&quot;</span><span class="nt">&gt;</span>Here is the text to be displayed<span class="nt">&lt;/text&gt;</span>
</pre></div>
</div>
<p>Here is <a class="reference external" href="http://wiki.stupeflix.com/doku.php?id=texteffects">the list of available text effects</a> and the <a class="reference external" href="http://wiki.stupeflix.com/doku.php?id=fonts">list of available fonts</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="9%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Presence</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>filename</td>
<td>required</td>
<td>the filename in the zip //soundtracks// directory or a url</td>
</tr>
<tr class="row-odd"><td>duration</td>
<td>optional</td>
<td>overrides the audio file original duration</td>
</tr>
<tr class="row-even"><td>fadein</td>
<td>optional</td>
<td>starts the audio track with a fade in of the specified duration</td>
</tr>
<tr class="row-odd"><td>fadeout</td>
<td>optional</td>
<td>ends the audio track with a fade out of the specified duration</td>
</tr>
<tr class="row-even"><td>skip</td>
<td>optional</td>
<td>skip the specified duration in the input file</td>
</tr>
<tr class="row-odd"><td>margin-start</td>
<td>optional</td>
<td>starts the audio track with the specified delay (full duration is usually given by a enclosing node)</td>
</tr>
<tr class="row-even"><td>margin-end</td>
<td>optional</td>
<td>ends the audio track with the speficied delay before the end (full duration given by the enclosing node)</td>
</tr>
<tr class="row-odd"><td>margin-both</td>
<td>optional</td>
<td>sets both margin. This is exclusive of other &#8220;margin&#8221; attributes</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>optional</td>
<td>arbitrary float, sets the volume (default is 1.0)</td>
</tr>
</tbody>
</table>
<p>An audio entry example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;audio</span> <span class="na">filename=</span><span class="s">&quot;thriller.mp3&quot;</span> <span class="na">fadein=</span><span class="s">&quot;1.0&quot;</span> <span class="na">fadeout=</span><span class="s">&quot;4.0&quot;</span> <span class="na">skip=</span><span class="s">&quot;2.0&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Here is a small example on how to use margins:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;movie</span> <span class="na">service=</span><span class="s">&quot;craftsman-1.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;stack&gt;</span>
      <span class="nt">&lt;effect</span> <span class="na">type=</span><span class="s">&quot;panel&quot;</span> <span class="na">duration=</span><span class="s">&quot;15.0&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;image</span> <span class="na">filename =</span> <span class="s">&quot;http://assets.stupeflix.com/code/images/Ha_long_bay.jpg&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/effect&gt;</span>
      <span class="nt">&lt;audio</span> <span class="na">filename=</span><span class="s">&quot;http://dl.dropbox.com/u/1524046/Music/Catch_a_Marvel.mp3&quot;</span> <span class="na">fadeout=</span><span class="s">&quot;2.0&quot;</span> <span class="na">margin-both=</span><span class="s">&quot;2.0&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/stack&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/movie&gt;</span>
</pre></div>
</div>
<p>In that case, the stack tag is assigned the only specified duration, 15.0 seconds. So the audio margins apply on that duration, and audio track is composed of:
* 2.0 seconds of silence
* 9.0 seconds of music
* 2.0 seconds of fade out
* 2.0 seconds of silence</p>
<p>For a total of 15.0 seconds.</p>
<p>More information on how durations are affected in <a class="reference external" href="http://wiki.stupeflix.com/doku.php?id=computingdurations">Computing Durations</a>.</p>
</div>
</div>
<div class="section" id="images-and-videos">
<h2>Images and Videos<a class="headerlink" href="#images-and-videos" title="Permalink to this headline">¶</a></h2>
<div class="section" id="images">
<h3>Images<a class="headerlink" href="#images" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="9%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Presence</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>filename</td>
<td>required</td>
<td>the filename in the zip //images// directory or a url.</td>
</tr>
<tr class="row-odd"><td>color</td>
<td>required</td>
<td>the &#8220;#&#8221; char followd by a 6 or 8 long RGB(A) hexadecimal string</td>
</tr>
</tbody>
</table>
<p>So an image examples are:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;image</span> <span class="na">filename=</span><span class="s">&quot;lena.jpg&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;image</span> <span class="na">color=</span><span class="s">&quot;#ff0000&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;image</span> <span class="na">color=</span><span class="s">&quot;#ffffff88&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>You can too query Google Maps to get directly a <a class="reference external" href="http://wiki.stupeflix.com/doku.php?id=gmapsimage">map image</a>.</p>
</div>
<div class="section" id="videos">
<h3>Videos<a class="headerlink" href="#videos" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="9%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Presence</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>filename</td>
<td>required</td>
<td>the filename in the zip //videos// directory or a url.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;video</span> <span class="na">filename=</span><span class="s">&quot;sunset.mpg&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="filters">
<h2>Filters<a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="more">
<h3>More<a class="headerlink" href="#more" title="Permalink to this headline">¶</a></h3>
<p>You will find a complete descriptions of parameters for each kind of filter in <a class="reference external" href="http://wiki.stupeflix.com/doku.php?id=filters">Filters</a>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Video Description Language</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#movie-definition-full-featured">Movie definition, full featured</a><ul>
<li><a class="reference internal" href="#atoms">Atoms</a></li>
<li><a class="reference internal" href="#operators">Operators</a></li>
<li><a class="reference internal" href="#atoms-operators-combination">Atoms / Operators combination</a></li>
<li><a class="reference internal" href="#effects">Effects</a></li>
<li><a class="reference internal" href="#transitions">Transitions</a></li>
<li><a class="reference internal" href="#text">Text</a></li>
</ul>
</li>
<li><a class="reference internal" href="#images-and-videos">Images and Videos</a><ul>
<li><a class="reference internal" href="#images">Images</a></li>
<li><a class="reference internal" href="#videos">Videos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#filters">Filters</a><ul>
<li><a class="reference internal" href="#more">More</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="03_play_js.html"
                        title="previous chapter">Play.js</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="05_supported_coders_formats.html"
                        title="next chapter">Supported coders, formats</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/resources/04_video_description_langage.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="05_supported_coders_formats.html" title="Supported coders, formats"
             >next</a> |</li>
        <li class="right" >
          <a href="03_play_js.html" title="Play.js"
             >previous</a> |</li>
        <li><a href="../index.html">Stupeflix API 1.0 documentation</a> &raquo;</li>
          <li><a href="../resources.html" >Resources</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Stupeflix.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>