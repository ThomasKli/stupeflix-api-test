

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorials &mdash; Stupeflix API 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Stupeflix API 1.0 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">Stupeflix API 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<div class="section" id="stupeflix-api">
<h2>Stupeflix API<a class="headerlink" href="#stupeflix-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="automatically-send-videos">
<h3>Automatically send videos<a class="headerlink" href="#automatically-send-videos" title="Permalink to this headline">¶</a></h3>
<p>To Youtube, Facebook, Dailymotion, Amazon S3, my own server ...</p>
<p>Using the Stupeflix API, you can choose the kind of video you want to generate, through a XML file which is send by POST by the createProfiles function. But in the same call, you can choose too to upload the video to several targets : Amazon S3 bucket, http server, and even YouTube, Facebook or Dailymotion. Here are some examples given for PhP. Other languages are supported too, as clients are only a wrappers to generate a XML settings file. The XML Schema can be found here: <a class="reference external" href="http://code.stupeflix.com/createprofile.xsd">http://code.stupeflix.com/createprofile.xsd</a> . To have these examples running, you will need the Stupeflix SDK.</p>
<div class="section" id="generic-code">
<h4>Generic code<a class="headerlink" href="#generic-code" title="Permalink to this headline">¶</a></h4>
<p>Here is a skeleton for video creation / upload. The video definition you want to send should be in the &#8220;test.xml&#8221; file:</p>
<div class="highlight-python"><pre>define('stupeflixAccessKey', 'PUT-YOUR-ACCESS-KEY-HERE');
define('stupeflixSecretKey', 'PUT-YOUR-SECRET-KEY-HERE');

// Create the client
$stupeflix = new Stupeflix(stupeflixAccessKey, stupeflixSecretKey);

// If you plan to offer the service to your own users,
// you can set the user variable to your user id.
// Otherwise, you can always keep the same name
$user = "user112";

// Each of your users can have different projects.
// Each resource id should be unique to each project, as video file will be overwritten at each video generation
$resource = "resource2034";

$metaDict = array("title" =&gt; "Upload test ",
                  "description"=&gt;"This is an upload test",
                  "thumbnailTime"=&gt;"2",  // useful to choose the thumbnail time
                  "tags"=&gt;"upload test",
                  "channels"=&gt;"Tech",
                  "acl"=&gt;"public",
                  "location"=&gt;"48.8583,2.2945"); // A famous tower position

$meta = new StupeflixMeta($metaDict);

$upload = #################### HERE IS THE UPLOAD SETUP CODE

$profile = new StupeflixProfile("iphone", array($upload), $meta);

$profiles = new StupeflixProfileSet(array($profile), null, null);
$stupeflix-&gt;sendDefinition($user, $resource, "test.xml");
$stupeflix-&gt;createProfiles($user, $resource, $profiles);</pre>
</div>
<p>For the following upload code bits, you should replace the $upload = ... line by the provided code. This example show you how to upload to a single target, but you can define several upload objects at once this way:</p>
<div class="highlight-python"><pre>$upload0 = #################### HERE IS THE UPLOAD SETUP CODE
$upload1 = #################### HERE IS THE UPLOAD SETUP CODE
$upload2 = #################### HERE IS THE UPLOAD SETUP CODE

$profile = new StupeflixProfile("iphone", array($upload0, $upload1, $upload2), $meta);</pre>
</div>
</div>
<div class="section" id="stupeflix-default-upload">
<h4>Stupeflix Default Upload<a class="headerlink" href="#stupeflix-default-upload" title="Permalink to this headline">¶</a></h4>
<p>The code is simply:</p>
<div class="highlight-python"><pre>$upload = new StupeflixDefaultUpload();</pre>
</div>
<p>The video will be stored temporarily on Stupeflix storage. You have to use this upload type if you want to be able to retrieve the video through a getProfile API call. <strong>This upload is required if you want to use the getProfileUrl/getProfile functions in the stupeflix clients. If you don&#8217;t add it, the url returned with getProfileUrl will give you a 404 as the file does not exist at this place.</strong></p>
</div>
<div class="section" id="youtube-upload">
<h4>Youtube Upload<a class="headerlink" href="#youtube-upload" title="Permalink to this headline">¶</a></h4>
<p>The first way to use the youtube upload is simply to use the login / password of an account:</p>
<div class="highlight-python"><pre>$upload = new StupeflixYoutubeUpload('MY_YOUTUBE_LOGIN', 'MY_YOUTUBE_PASSWORD', $meta);</pre>
</div>
<p>This is of course not always possible: - if you don&#8217;t want us to know your Youtube credentials - if you want to use your own users credentials and they don&#8217;t want YOU to have them The Youtube API allows you to create / get a one time or session token. ( <a class="reference external" href="http://code.google.com/apis/youtube/2.0/developers_guide_protocol.html#AuthSub_Authentication">http://code.google.com/apis/youtube/2.0/developers_guide_protocol.html#AuthSub_Authentication</a> ) So we provide a second way: you to pass the token to us, so we can upload the video without knowing the full credentials. In that case, the code is:</p>
<div class="highlight-python"><pre>$upload = new StupeflixYoutubeTokenUpload('MY_YOUTUBE_DEVELOPER_KEY', 'MY_TOKEN');</pre>
</div>
</div>
<div class="section" id="facebook-upload">
<h4>Facebook Upload<a class="headerlink" href="#facebook-upload" title="Permalink to this headline">¶</a></h4>
<p>Uploading videos to Facebook is similar to Youtube upload. A different point is that meta information is limited to title and description. And something important to be noted is that every uploaded video is by default visible to everybody, not limited to friends. There is currently no mean to change it through their API, so we can&#8217;t either offer it to our users. So basically, the code is:</p>
<div class="highlight-python"><pre>$upload = new StupeflixFacebookUpload("MY_FACEBOOK_API_KEY", "MY_APPLICATION_SECRET", "MY_USER_TOKEN", $meta);</pre>
</div>
<p>Your Facebook API Key can be safely shared, so it is OK to give to us. The application secret is different, as you should not give it to unsafe parties (by the way, I am not meaning that we are unsafe ;-) ) This secret is different if your APP is registered as a Web App or a Desktop App on Facebook. (By the way those names are not really well chosen, as you Web App can use as well a &#8220;Desktop App&#8221; style of authentification). So, if your application is a Web App, you have to send us your application secret. But if your application is a Desktop App, you HAVE to create a session secret, and send it to us. Don&#8217;t send your application secret, as it won&#8217;t work. Desktop App authentication is designed to run in untrusted environement, that&#8217;s exactly what we needed. Finally, you send us a user session token you have built using the Facebook API. <strong>Some python example for facebook authentication code can be found</strong> <a class="reference external" href="http://wiki.stupeflix.com/doku.php?id=facebookuploadauthpython">Here</a>.</p>
</div>
<div class="section" id="amazon-s3-upload">
<h4>Amazon S3 Upload<a class="headerlink" href="#amazon-s3-upload" title="Permalink to this headline">¶</a></h4>
<p>A simple way to send videos to your own bucket is to use the following code ( DISCLAIMER: THIS FIRST METHOD IS STRICLY NOT RECOMMENDED BY AMAZON, AS YOUR SECRET KEY SHOULD BE KEPT SECRET AT ALL TIME. ):</p>
<div class="highlight-python"><pre>$upload = new StupeflixS3Upload("MY_BUCKET_NAME", "MY_ACCESS_KEY", "MY_SECRET_KEY", "MY_PREFIX", $meta);</pre>
</div>
<p>Where you fill in your Amazon S3 accesskey and secret key. The video will be stored under the &#8220;MY_PREFIX_PATH&#8221; A SAFE way it to grant write access to your bucket to the Stupeflix Application, using bucket ACLS. Documentation for ACLS can be found [[<a class="reference external" href="http://docs.amazonwebservices.com/AmazonS3/latest/dev/index.html?S3_ACLs">http://docs.amazonwebservices.com/AmazonS3/latest/dev/index.html?S3_ACLs</a>.html|here]]. To do so, got to <a class="reference external" href="https://console.aws.amazon.com/s3/home">https://console.aws.amazon.com/s3/home</a> and set the bucket ACL with write access to Stupeflix editing the properties of the bucket, using our canonical id : ef5245b3f16862462f8e735597a41f668003600ceaea3b4e86a94e5fee1d5f82 . The code is then:</p>
<div class="highlight-python"><pre>$upload = new StupeflixS3Upload("MY_BUCKET_NAME", null, null, "MY_PREFIX", $meta);</pre>
</div>
<p>A thumbnail will be uploaded alongwith the video.</p>
</div>
<div class="section" id="dailymotion-upload">
<h4>Dailymotion Upload<a class="headerlink" href="#dailymotion-upload" title="Permalink to this headline">¶</a></h4>
<p>To perform an upload on Dailymotion, simply use the login / password of an account:</p>
<div class="highlight-python"><pre>$upload = new StupeflixDailymotionUpload('MY_DAILYMOTION_LOGIN', 'MY_DAILYMOTION_PASSWORD', $meta);</pre>
</div>
</div>
<div class="section" id="http-put-upload">
<h4>HTTP PUT Upload<a class="headerlink" href="#http-put-upload" title="Permalink to this headline">¶</a></h4>
<p>The code is simply:</p>
<div class="highlight-python"><pre>$upload = new StupeflixHttpPUTUpload("http://path/to/my/upload/script");</pre>
</div>
<p>A PUT call will be done on this url, with the video in the body.</p>
</div>
<div class="section" id="http-post-upload">
<h4>HTTP POST Upload<a class="headerlink" href="#http-post-upload" title="Permalink to this headline">¶</a></h4>
<p>The code is simply:</p>
<div class="highlight-python"><pre>$upload = new StupeflixHttpPOSTUpload("http://path/to/my/upload/script");</pre>
</div>
<p>A POST call will be done on this url, with the video in a multipart field whose name is &#8220;file&#8221;.</p>
</div>
</div>
<div class="section" id="send-a-zip-file-to-the-api-instead-of-a-simple-xml-file">
<h3>Send a zip file to the api instead of a simple XML file<a class="headerlink" href="#send-a-zip-file-to-the-api-instead-of-a-simple-xml-file" title="Permalink to this headline">¶</a></h3>
<p>Here is a <a class="reference external" href="https://stupeflix-assets.s3.amazonaws.com/code/samples/ziptest.zip">sample zip file</a>. Each asset kind must be stored in its own sub-directory: <strong>images, audios, videos, fonts</strong> At the root of the zip file you must add a <strong>movie.xml</strong> file conforming to the Stupeflix Video XML Language and describing the video. The assets are named in the movie.xml file without specifying their directory prefix:</p>
<div class="highlight-python"><pre>&lt;movie service="craftsman-1.0"&gt;
  &lt;body&gt;
    &lt;stack&gt;
      &lt;audio filename="music.mp3" duration=".."/&gt;
      &lt;sequence&gt;
        &lt;effect type="diving" &gt;
          &lt;image filename="image1.jpg"/&gt;
          &lt;image filename="image2.png"/&gt;
        &lt;/effect&gt;
        &lt;text type="zone" fontname="myfont"&gt;Coucou&lt;/text&gt;
        &lt;effect type="none" duration="5"&gt;
          &lt;video filename="video.mp4"/&gt;
        &lt;/effect&gt;
       &lt;/sequence&gt;
     &lt;/stack&gt;
  &lt;/body&gt;
&lt;/movie&gt;</pre>
</div>
<p>For example the video.mp4 is actually stored in the video directory. The structure of the zip file is simple:</p>
<div class="highlight-python"><pre>movie.xml
audios/
  music.mp3
fonts/
  myfont
images
  image1.jpg
  image2.png
videos
  video.mp4</pre>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorials</a><ul>
<li><a class="reference internal" href="#stupeflix-api">Stupeflix API</a><ul>
<li><a class="reference internal" href="#automatically-send-videos">Automatically send videos</a><ul>
<li><a class="reference internal" href="#generic-code">Generic code</a></li>
<li><a class="reference internal" href="#stupeflix-default-upload">Stupeflix Default Upload</a></li>
<li><a class="reference internal" href="#youtube-upload">Youtube Upload</a></li>
<li><a class="reference internal" href="#facebook-upload">Facebook Upload</a></li>
<li><a class="reference internal" href="#amazon-s3-upload">Amazon S3 Upload</a></li>
<li><a class="reference internal" href="#dailymotion-upload">Dailymotion Upload</a></li>
<li><a class="reference internal" href="#http-put-upload">HTTP PUT Upload</a></li>
<li><a class="reference internal" href="#http-post-upload">HTTP POST Upload</a></li>
</ul>
</li>
<li><a class="reference internal" href="#send-a-zip-file-to-the-api-instead-of-a-simple-xml-file">Send a zip file to the api instead of a simple XML file</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tutorials.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">Stupeflix API 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Thomas.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>